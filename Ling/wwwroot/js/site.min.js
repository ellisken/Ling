function startRecording(){$("#recordingsList").empty();$(".results").toggleClass("d-none",!0);navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(n=>{console.log("permissions granted!! i'm in the promise!"),getUserMediaStream=n,audioContext=new AudioContext,input=audioContext.createMediaStreamSource(n),rec=new Recorder(input,{numChannels:1}),rec.record(),setTimeout(()=>{rec.recording&&stopRecording()},31e3),console.log("recording has started")}).catch(()=>{$(".outline").toggleClass("pulse",!1)})}function stopRecording(){console.log("Stop button clicked");rec.stop();$("#transcribeBtn").toggleClass("d-none",!1);rec.context.close();getUserMediaStream.getAudioTracks()[0].stop();rec.exportWAV(appendAudioElement)}function RecordToggleButton(){rec!==undefined&&rec.recording?(stopRecording(),$(".outline").toggleClass("pulse",!1)):(startRecording(),$(".outline").toggleClass("pulse",!0))}function appendAudioElement(n){audioBlob=n;const i=URL.createObjectURL(n),t=document.createElement("audio");let r=(new Date).toISOString();t.controls=!0;t.src=i;recordingsList.appendChild(t)}let getUserMediaStream,rec,input,AudioContext=window.AudioContext||webkit.AudioContext,audioContext,audioBlob;const recordingsList=document.getElementById("recordingsList");$(".recordBtn").click(function(){RecordToggleButton();console.log("Clicked")});$("#transcribeBtn").click(function(){const i=$("#languageRegion option:selected").html();$(".loader-wrap").toggleClass("d-none",!1);$("#transcribeBtn").toggleClass("d-none",!0);const n=new XMLHttpRequest;n.onload=function(){if(this.readyState===4){var t=JSON.parse(n.responseText);$(".loader-wrap").toggleClass("d-none",!0);$("#result_language").text(t.language);$("#result_transcript").text(t.transcript);$(".results").toggleClass("d-none",!1)}};const t=new FormData;t.append("language_region",i);t.append("audio_data",audioBlob,(new Date).toISOString());n.open("POST","/Recording/Create",!0);n.send(t)});